<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIVRARIA</title>

    <!-- Botstrap-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <script src="./angularJS/angular.js"></script>
    <script src="./controllers/book_controller.js"></script>

</head>

<body ng-app="LivrariaApp">
    <div class="container mt-5" ng-controller="LivrariaController as livraria">
        <h1 class="text-center mb-4">Livraria</h1>

        <!-- Formulário para adicionar livros -->
        <form class="mb-4" ng-submit="livraria.addBook()">
            <div class="row g-2">
                <div class="col-md-8">
                    <input type="text" class="form-control" ng-model="livraria.pesq" placeholder="Título" required>
                </div>
                <div class="col-md-4">
                    <button type="submit" class="btn btn-primary w-100">Adicionar</button>
                </div>
            </div>
        </form>

        <!-- Formulário para editar livros -->
        <form class="mb-4" ng-submit="livraria.saveEdit()">
            <div class="row g-2">
                <div class="col-md-3">
                    <input type="text" class="form-control" ng-model="livraria.newBook.title" placeholder="Título"
                        required>
                </div>
                <div class="col-md-3">
                    <input type="text" class="form-control" ng-model="livraria.newBook.author" placeholder="Autor"
                        required>
                </div>
                <div class="col-md-2">
                    <input type="number" class="form-control" ng-model="livraria.newBook.year" placeholder="Ano">
                </div>
                <div class="col-md-2">
                    <input type="text" class="form-control" ng-model="livraria.newBook.genre" placeholder="Gênero">
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-success w-100" ng-disabled="livraria.editingIndex === null">
                        Salvar
                    </button>
                </div>
            </div>
        </form>

        <!-- Lista de livros -->
        <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between align-items-center"
                ng-repeat="book in livraria.books">
                <span>
                    <strong>{{book.title}}</strong> por {{book.author}}
                    ({{book.year}}) - {{book.genre}}
                </span>
                <span>
                    <button class="btn btn-warning btn-sm me-2" ng-click="livraria.editBook($index)">
                        Editar
                    </button>
                    <button class="btn btn-danger btn-sm" ng-click="livraria.removeBook(book._id, $index)">
                        Excluir
                    </button>
                </span>
            </li>
        </ul>
    </div>
</body>

</html>